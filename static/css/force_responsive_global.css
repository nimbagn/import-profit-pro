/* =========================================================
   FORCE RESPONSIVE GLOBAL - CORRECTIONS URGENTES
   Force le responsive sur TOUTES les pages, même avec styles inline
   PRIORITÉ MAXIMALE - Chargé en dernier
   ========================================================= */

/* =========================================================
   OVERRIDE GLOBAL - FORCER RESPONSIVE SUR TOUT
   ========================================================= */

/* Forcer margin-left à 0 sur mobile pour TOUS les éléments */
@media (max-width: 1024px) {
    /* Override TOUS les styles inline margin-left (toutes variations) */
    [style*="margin-left: 280px"],
    [style*="margin-left:280px"],
    [style*="margin-left: 260px"],
    [style*="margin-left:260px"],
    [style*="margin-left: 240px"],
    [style*="margin-left:240px"],
    [style*="margin-left: 220px"],
    [style*="margin-left:220px"],
    [style*="margin-left:200px"],
    [style*="margin-left: 200px"] {
        margin-left: 0 !important;
    }
    
    /* Override TOUS les .main-content avec margin-left (toutes variations) */
    .main-content[style*="margin-left"],
    .main-content[style*="margin-left: 280px"],
    .main-content[style*="margin-left:280px"],
    .main-content[style*="margin-left: 260px"],
    .main-content[style*="margin-left:260px"],
    .main-content[style*="margin-left: 240px"],
    .main-content[style*="margin-left:240px"],
    .main-content {
        margin-left: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
    
    /* Override TOUS les containers */
    .form-container,
    .container,
    .container-fluid,
    .dashboard-container,
    .page-container,
    .content-wrapper,
    [class*="container"],
    [class*="wrapper"] {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
    
    /* Override footer avec margin-left */
    footer[style*="margin-left"],
    .footer-hl[style*="margin-left"],
    footer {
        margin-left: 0 !important;
        width: 100% !important;
    }
}

/* =========================================================
   MOBILE PORTRAIT (< 768px) - FORCE ABSOLUE
   ========================================================= */
@media (max-width: 768px) {
    /* Forcer TOUS les éléments à 100% largeur */
    * {
        max-width: 100vw !important;
    }
    
    /* Override absolu pour main-content */
    .main-content,
    .main-content[style*="margin-left"],
    [class*="main-content"][style*="margin-left"] {
        margin-left: 0 !important;
        margin-right: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        padding-left: 1rem !important;
        padding-right: 1rem !important;
        padding-top: 70px !important;
    }
    
    /* Override tous les containers et wrappers */
    .form-container,
    .container,
    .container-fluid,
    .dashboard-container,
    .page-container,
    .content-wrapper,
    [class*="container"],
    [class*="wrapper"] {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
    
    /* Override tous les formulaires */
    .form-hl,
    .form,
    form,
    .card-hl,
    .card {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding: 1rem !important;
    }
    
    /* Override toutes les grilles */
    .form-row,
    .row,
    [class*="row"],
    [class*="grid"] {
        display: flex !important;
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    .form-row > *,
    .row > *,
    [class*="col-"] {
        width: 100% !important;
        flex: 1 1 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
    
    /* Override tous les inputs */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="number"],
    input[type="date"],
    input[type="time"],
    input[type="tel"],
    textarea,
    select,
    .form-control,
    .form-select,
    [class*="input"],
    [class*="select"] {
        width: 100% !important;
        max-width: 100% !important;
        font-size: 16px !important;
        padding: 0.75rem 1rem !important;
        box-sizing: border-box !important;
    }
    
    /* Override tous les boutons */
    .btn,
    button,
    [type="submit"],
    [type="button"],
    [class*="btn"] {
        width: 100% !important;
        min-height: 44px !important;
        padding: 0.75rem 1rem !important;
        font-size: 1rem !important;
        margin: 0.25rem 0 !important;
    }
    
    .btn-group,
    [class*="btn-group"] {
        flex-direction: column !important;
        width: 100% !important;
    }
    
    .btn-group > * {
        width: 100% !important;
        margin-bottom: 0.5rem !important;
    }
    
    /* Override toutes les tables */
    .table-responsive,
    [class*="table"] {
        width: 100% !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        display: block !important;
    }
    
    .table,
    .table-hl,
    table {
        min-width: 600px !important;
        width: 100% !important;
        font-size: 0.875rem !important;
    }
    
    .table th,
    .table td,
    .table-hl th,
    .table-hl td,
    th,
    td {
        padding: 0.5rem 0.75rem !important;
        white-space: nowrap !important;
    }
    
    /* Override toutes les cards */
    .card,
    .card-hl,
    [class*="card"] {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        margin-bottom: 1rem !important;
        padding: 1rem !important;
    }
    
    /* Override toutes les grilles de stats */
    .stats-grid,
    .modules-grid,
    .cards-grid,
    [class*="grid"] {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
        width: 100% !important;
    }
    
    /* Override typographie */
    h1 { font-size: 1.75rem !important; line-height: 1.3 !important; }
    h2 { font-size: 1.5rem !important; line-height: 1.3 !important; }
    h3 { font-size: 1.25rem !important; line-height: 1.4 !important; }
    h4 { font-size: 1.1rem !important; line-height: 1.4 !important; }
    h5 { font-size: 1rem !important; line-height: 1.4 !important; }
    h6 { font-size: 0.95rem !important; line-height: 1.4 !important; }
    
    p, li, span, div {
        font-size: 0.95rem !important;
        line-height: 1.6 !important;
    }
    
    /* Override modales */
    .modal-dialog,
    [class*="modal"] {
        margin: 0 !important;
        max-width: 100% !important;
        width: 100% !important;
    }
    
    .modal-content {
        height: 100% !important;
        border-radius: 0 !important;
    }
    
    /* Override sections spéciales */
    .hero-section,
    .page-header-hl,
    .search-section,
    [class*="hero"],
    [class*="header"] {
        width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
    
    /* Override badges et spans inline */
    span[style*="margin-left"],
    .badge[style*="margin-left"],
    [style*="margin-left"] {
        margin-left: 0.25rem !important;
    }
    
    /* Override width fixes */
    [style*="width: 150px"],
    [style*="width:150px"],
    [style*="width: 200px"],
    [style*="width:200px"],
    [style*="width: 300px"],
    [style*="width:300px"] {
        width: auto !important;
        max-width: 100% !important;
    }
}

/* =========================================================
   MOBILE PAYSAGE (< 768px landscape) - FORCE ABSOLUE
   ========================================================= */
@media (max-width: 768px) and (orientation: landscape) {
    .main-content,
    .main-content[style*="margin-left"] {
        margin-left: 0 !important;
        width: 100% !important;
    }
    
    .form-row,
    .row {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 0.75rem !important;
    }
    
    .stats-grid,
    .modules-grid {
        grid-template-columns: repeat(2, 1fr) !important;
    }
}

/* =========================================================
   PETIT MOBILE (< 480px) - FORCE ABSOLUE
   ========================================================= */
@media (max-width: 480px) {
    .main-content,
    .form-container,
    .container,
    .dashboard-container {
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }
    
    .form-hl,
    .card-hl,
    .card {
        padding: 0.75rem !important;
    }
    
    h1 { font-size: 1.5rem !important; }
    h2 { font-size: 1.25rem !important; }
    h3 { font-size: 1.1rem !important; }
    
    .btn,
    button {
        padding: 0.625rem 0.875rem !important;
        font-size: 0.95rem !important;
    }
}

/* =========================================================
   OVERRIDE SPÉCIFIQUE POUR PAGES PROBLÉMATIQUES
   ========================================================= */

/* Pages avec margin-left inline */
@media (max-width: 1024px) {
    /* Stocks */
    .stocks-page,
    .warehouse-dashboard,
    .movements-list,
    .stock-summary {
        margin-left: 0 !important;
        width: 100% !important;
    }
    
    /* Orders */
    .orders-list,
    .order-form,
    .order-detail {
        margin-left: 0 !important;
        width: 100% !important;
    }
    
    /* Forecast */
    .forecast-new,
    .forecast-edit,
    .forecast-list {
        margin-left: 0 !important;
        width: 100% !important;
    }
    
    /* Promotion */
    .promotion-workflow,
    .promotion-dashboard {
        margin-left: 0 !important;
        width: 100% !important;
    }
    
    /* Flotte */
    .flotte-dashboard,
    .vehicle-detail {
        margin-left: 0 !important;
        width: 100% !important;
    }
}

/* =========================================================
   FORCER OVERFLOW HIDDEN
   ========================================================= */
@media (max-width: 768px) {
    html,
    body {
        overflow-x: hidden !important;
        width: 100% !important;
        max-width: 100vw !important;
    }
    
    * {
        max-width: 100vw !important;
    }
    
    .container,
    .container-fluid,
    .row,
    [class*="container"],
    [class*="wrapper"] {
        overflow-x: hidden !important;
    }
}

/* =========================================================
   OVERRIDE STYLES INLINE PROBLÉMATIQUES
   ========================================================= */
@media (max-width: 768px) {
    /* Override tous les styles inline avec width */
    [style*="width: 150px"],
    [style*="width:150px"],
    [style*="width: 200px"],
    [style*="width:200px"],
    [style*="width: 300px"],
    [style*="width:300px"],
    [style*="width: 400px"],
    [style*="width:400px"],
    [style*="min-width: 1000px"],
    [style*="min-width:1000px"] {
        width: auto !important;
        min-width: auto !important;
        max-width: 100% !important;
    }
    
    /* Override padding excessif */
    [style*="padding: 3rem"],
    [style*="padding:3rem"],
    [style*="padding: 4rem"],
    [style*="padding:4rem"] {
        padding: 1rem !important;
    }
}

/* =========================================================
   FORCER RESPONSIVE SUR TOUS LES ÉLÉMENTS
   ========================================================= */
@media (max-width: 768px) {
    /* Forcer flex column sur tous les flex containers */
    [style*="display: flex"],
    [style*="display:flex"],
    .d-flex,
    [class*="flex"] {
        flex-direction: column !important;
        flex-wrap: wrap !important;
    }
    
    /* Forcer grid 1 colonne */
    [style*="grid-template-columns"],
    [style*="grid-template"],
    [class*="grid"] {
        grid-template-columns: 1fr !important;
    }
}

/* =========================================================
   CORRECTIONS SPÉCIFIQUES PAR PAGE
   ========================================================= */

/* Loading Summary Detail */
@media (max-width: 768px) {
    .loading-summary-detail .main-content,
    .loading-summary-detail [style*="margin-left: 280px"] {
        margin-left: 0 !important;
        width: 100% !important;
    }
}

/* Orders List */
@media (max-width: 768px) {
    .orders-list .main-content,
    .orders-list [style*="margin-left: 280px"] {
        margin-left: 0 !important;
        width: 100% !important;
    }
}

/* Stock Summary */
@media (max-width: 768px) {
    .stock-summary .main-content,
    .stock-summary [style*="margin-left: 280px"] {
        margin-left: 0 !important;
        width: 100% !important;
    }
}

/* Warehouse Dashboard */
@media (max-width: 768px) {
    .warehouse-dashboard .main-content,
    .warehouse-dashboard [style*="margin-left: 280px"] {
        margin-left: 0 !important;
        width: 100% !important;
    }
}

/* Movements List */
@media (max-width: 768px) {
    .movements-list .main-content,
    .movements-list [style*="margin-left: 280px"] {
        margin-left: 0 !important;
        width: 100% !important;
    }
    
    .movements-list table {
        min-width: 600px !important;
    }
}

/* =========================================================
   UTILITAIRES FORCE RESPONSIVE
   ========================================================= */
@media (max-width: 768px) {
    .force-responsive {
        margin-left: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
    
    .force-full-width {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    .force-no-margin {
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
    
    .force-column {
        flex-direction: column !important;
        display: flex !important;
    }
}

