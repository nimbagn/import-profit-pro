/* =========================================================
   MOBILE FIX - CORRECTIONS RESPONSIVE URGENTES
   Corrections pour rendre l'application 100% responsive
   ========================================================= */

/* =========================================================
   VIEWPORT ET BASE
   ========================================================= */
html {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
}

body {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
    position: relative;
}

* {
    box-sizing: border-box;
}

/* =========================================================
   SIDEBAR - FORCER MASQUAGE SUR MOBILE
   ========================================================= */
@media (max-width: 1024px) {
    .sidebar {
        transform: translateX(-100%) !important;
        transition: transform 0.3s ease-in-out;
        z-index: 2000;
        position: fixed !important;
    }
    
    .sidebar.mobile-open {
        transform: translateX(0) !important;
    }
    
    /* FORCER margin-left à 0 pour TOUS les éléments */
    .main-content,
    .main-content[style*="margin-left"],
    [style*="margin-left: 280px"],
    [style*="margin-left: 260px"],
    [style*="margin-left: 240px"] {
        margin-left: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
}

@media (max-width: 768px) {
    .sidebar {
        width: 280px !important;
    }
    
    .main-content {
        margin-left: 0 !important;
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }
    
    /* Forcer tous les contenus à 100% largeur */
    .form-container,
    .container,
    .container-fluid {
        width: 100% !important;
        max-width: 100% !important;
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
}

/* =========================================================
   HEADER - RESPONSIVE FORCÉ
   ========================================================= */
@media (max-width: 1024px) {
    .top-header {
        left: 0 !important;
        width: 100% !important;
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
}

@media (max-width: 768px) {
    .top-header {
        height: 60px !important;
        padding: 0 1rem !important;
    }
    
    .user-menu .dropdown-toggle span {
        display: none !important;
    }
}

@media (max-width: 480px) {
    .top-header {
        height: 56px !important;
        padding: 0 0.75rem !important;
    }
}

/* =========================================================
   TOUS LES FORMULAIRES - RESPONSIVE FORCÉ
   ========================================================= */
@media (max-width: 768px) {
    .form-hl,
    .form-container,
    .card-hl,
    .card {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding: 1rem !important;
    }
    
    .form-row,
    .row {
        display: flex !important;
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    .form-row > *,
    .row > * {
        width: 100% !important;
        flex: 1 1 100% !important;
    }
    
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="number"],
    input[type="date"],
    input[type="time"],
    textarea,
    select,
    .form-control,
    .form-select {
        width: 100% !important;
        max-width: 100% !important;
        font-size: 16px !important; /* Évite zoom iOS */
        padding: 0.75rem 1rem !important;
    }
    
    .btn,
    button {
        width: 100% !important;
        min-height: 44px !important;
        padding: 0.75rem 1rem !important;
        font-size: 1rem !important;
    }
    
    .btn-group {
        flex-direction: column !important;
        width: 100% !important;
    }
    
    .btn-group .btn {
        width: 100% !important;
        margin-bottom: 0.5rem !important;
    }
}

/* =========================================================
   TABLES - RESPONSIVE FORCÉ
   ========================================================= */
@media (max-width: 768px) {
    .table-responsive {
        width: 100% !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        display: block !important;
    }
    
    .table,
    .table-hl {
        min-width: 600px !important;
        width: 100% !important;
        font-size: 0.875rem !important;
    }
    
    .table th,
    .table td,
    .table-hl th,
    .table-hl td {
        padding: 0.5rem 0.75rem !important;
        white-space: nowrap !important;
    }
}

/* =========================================================
   CARDS - RESPONSIVE FORCÉ
   ========================================================= */
@media (max-width: 768px) {
    .card,
    .card-hl {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        margin-bottom: 1rem !important;
        padding: 1rem !important;
    }
}

/* =========================================================
   GRID ET LAYOUT - RESPONSIVE FORCÉ
   ========================================================= */
@media (max-width: 768px) {
    .grid-2,
    .grid-3,
    .grid-4,
    [class*="col-"] {
        grid-template-columns: 1fr !important;
        width: 100% !important;
        flex: 1 1 100% !important;
    }
    
    .d-md-none,
    .d-lg-none,
    .d-xl-none {
        display: none !important;
    }
    
    .d-md-block,
    .d-md-flex {
        display: block !important;
    }
}

/* =========================================================
   MODALES - RESPONSIVE FORCÉ
   ========================================================= */
@media (max-width: 768px) {
    .modal-dialog {
        margin: 0 !important;
        max-width: 100% !important;
        width: 100% !important;
        height: 100% !important;
    }
    
    .modal-content {
        height: 100% !important;
        border-radius: 0 !important;
        margin: 0 !important;
    }
    
    .modal-body {
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    .modal-footer {
        flex-direction: column !important;
    }
    
    .modal-footer .btn {
        width: 100% !important;
        margin: 0.25rem 0 !important;
    }
}

/* =========================================================
   NAVIGATION - RESPONSIVE FORCÉ
   ========================================================= */
@media (max-width: 1024px) {
    .mobile-menu-toggle {
        display: block !important;
    }
    
    .sidebar-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1999;
        backdrop-filter: blur(4px);
    }
    
    .sidebar-overlay.active {
        display: block !important;
    }
}

/* =========================================================
   TYPOGRAPHIE - RESPONSIVE FORCÉ
   ========================================================= */
@media (max-width: 768px) {
    h1 { font-size: 1.75rem !important; line-height: 1.3 !important; }
    h2 { font-size: 1.5rem !important; line-height: 1.3 !important; }
    h3 { font-size: 1.25rem !important; line-height: 1.4 !important; }
    h4 { font-size: 1.1rem !important; line-height: 1.4 !important; }
    h5 { font-size: 1rem !important; line-height: 1.4 !important; }
    h6 { font-size: 0.95rem !important; line-height: 1.4 !important; }
    
    p, li, span {
        font-size: 0.95rem !important;
        line-height: 1.6 !important;
    }
}

@media (max-width: 480px) {
    h1 { font-size: 1.5rem !important; }
    h2 { font-size: 1.25rem !important; }
    h3 { font-size: 1.1rem !important; }
    h4 { font-size: 1rem !important; }
    
    p, li, span {
        font-size: 0.9rem !important;
    }
}

/* =========================================================
   SPACING - RESPONSIVE FORCÉ
   ========================================================= */
@media (max-width: 768px) {
    .p-3, .p-4, .p-5 {
        padding: 1rem !important;
    }
    
    .m-3, .m-4, .m-5 {
        margin: 1rem !important;
    }
    
    .px-3, .px-4, .px-5 {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
    
    .py-3, .py-4, .py-5 {
        padding-top: 1rem !important;
        padding-bottom: 1rem !important;
    }
}

/* =========================================================
   IMAGES ET MÉDIAS - RESPONSIVE FORCÉ
   ========================================================= */
img, video, iframe {
    max-width: 100% !important;
    height: auto !important;
}

/* =========================================================
   OVERFLOW - CORRECTION HORIZONTALE
   ========================================================= */
@media (max-width: 768px) {
    * {
        max-width: 100vw !important;
    }
    
    body, html {
        overflow-x: hidden !important;
    }
    
    .container,
    .container-fluid,
    .row,
    [class*="col-"] {
        max-width: 100% !important;
        overflow-x: hidden !important;
    }
}

/* =========================================================
   TOUCH TARGETS - ACCESSIBILITÉ MOBILE
   ========================================================= */
@media (max-width: 768px) {
    button,
    a.btn,
    input[type="submit"],
    input[type="button"],
    .btn,
    .clickable,
    a {
        min-height: 44px !important;
        min-width: 44px !important;
        padding: 12px 16px !important;
    }
    
    input[type="checkbox"],
    input[type="radio"] {
        width: 24px !important;
        height: 24px !important;
    }
}

/* =========================================================
   FIXES SPÉCIFIQUES POUR ÉLÉMENTS PROBLÉMATIQUES
   ========================================================= */
@media (max-width: 1024px) {
    /* Forcer tous les éléments avec margin-left fixe dans les styles inline */
    [style*="margin-left: 280px"],
    [style*="margin-left: 260px"],
    [style*="margin-left: 240px"],
    [style*="margin-left:280px"],
    [style*="margin-left:260px"],
    [style*="margin-left:240px"] {
        margin-left: 0 !important;
    }
    
    /* Forcer tous les éléments avec width fixe */
    [style*="width: 280px"],
    [style*="width: 260px"],
    [style*="width:280px"],
    [style*="width:260px"] {
        width: 100% !important;
    }
}

@media (max-width: 768px) {
    /* Forcer tous les padding excessifs */
    [style*="padding: 3rem"],
    [style*="padding: 2rem"],
    [style*="padding:3rem"],
    [style*="padding:2rem"] {
        padding: 1rem !important;
    }
    
    /* Forcer footer à 0 margin */
    footer[style*="margin-left"] {
        margin-left: 0 !important;
    }
}

/* =========================================================
   UTILITAIRES MOBILE
   ========================================================= */
@media (max-width: 768px) {
    .w-100-mobile { width: 100% !important; }
    .d-none-mobile { display: none !important; }
    .d-block-mobile { display: block !important; }
    .d-flex-mobile { display: flex !important; }
    .flex-column-mobile { flex-direction: column !important; }
    .text-center-mobile { text-align: center !important; }
    .p-0-mobile { padding: 0 !important; }
    .m-0-mobile { margin: 0 !important; }
}

