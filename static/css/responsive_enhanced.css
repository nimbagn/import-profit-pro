/* =========================================================
   RESPONSIVE ENHANCED - IMPORT PROFIT PRO
   Améliorations supplémentaires pour tous les appareils
   ========================================================= */

/* =========================================================
   VIEWPORT ET META
   ========================================================= */
html {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
}

* {
    box-sizing: border-box;
}

img, video {
    max-width: 100%;
    height: auto;
}

/* =========================================================
   TOUCH TARGETS OPTIMISÉS
   ========================================================= */
@media (max-width: 768px) {
    button,
    a.btn,
    input[type="submit"],
    input[type="button"],
    .clickable {
        min-height: 44px;
        min-width: 44px;
        padding: 12px 16px;
    }
    
    .btn-hl {
        min-height: 44px;
    }
    
    input[type="checkbox"],
    input[type="radio"] {
        width: 20px;
        height: 20px;
    }
}

/* =========================================================
   TABLES RESPONSIVE AVANCÉES
   ========================================================= */
@media (max-width: 768px) {
    .table-responsive {
        position: relative;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        border-radius: 8px;
    }
    
    .table-responsive::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 30px;
        background: linear-gradient(to right, transparent, rgba(0,0,0,0.05));
        pointer-events: none;
    }
    
    .table-hl,
    .table {
        min-width: 600px;
    }
    
    /* Cards pour tables sur mobile */
    .table-card-view {
        display: none;
    }
    
    @media (max-width: 768px) {
        .table-card-view {
            display: block;
        }
        
        .table-responsive {
            display: none;
        }
    }
}

/* =========================================================
   FORMULAIRES MOBILE OPTIMISÉS
   ========================================================= */
@media (max-width: 768px) {
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="number"],
    input[type="date"],
    input[type="time"],
    textarea,
    select {
        font-size: 16px !important; /* Évite le zoom automatique sur iOS */
        -webkit-appearance: none;
        appearance: none;
    }
    
    input[type="date"]::-webkit-calendar-picker-indicator {
        font-size: 18px;
    }
    
    textarea {
        resize: vertical;
        min-height: 120px;
    }
}

/* =========================================================
   MODALES RESPONSIVE
   ========================================================= */
@media (max-width: 768px) {
    .modal-dialog {
        margin: 0;
        max-width: 100%;
        height: 100%;
    }
    
    .modal-content {
        height: 100%;
        border-radius: 0;
        display: flex;
        flex-direction: column;
    }
    
    .modal-header {
        flex-shrink: 0;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .modal-body {
        flex: 1;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .modal-footer {
        flex-shrink: 0;
        border-top: 1px solid #e5e7eb;
        flex-direction: column;
    }
    
    .modal-footer .btn {
        width: 100%;
        margin: 4px 0;
    }
}

/* =========================================================
   NAVIGATION MOBILE AMÉLIORÉE
   ========================================================= */
@media (max-width: 1024px) {
    .sidebar {
        box-shadow: 2px 0 20px rgba(0,0,0,0.3);
    }
    
    .sidebar-overlay {
        transition: opacity 0.3s ease;
    }
    
    .sidebar-overlay.active {
        opacity: 1;
    }
}

/* =========================================================
   CARDS RESPONSIVE
   ========================================================= */
@media (max-width: 768px) {
    .card-hl {
        margin-left: 16px;
        margin-right: 16px;
        margin-bottom: 16px;
    }
    
    .card {
        margin-bottom: 16px;
    }
}

@media (max-width: 480px) {
    .card-hl {
        margin-left: 12px;
        margin-right: 12px;
        margin-bottom: 12px;
    }
}

/* =========================================================
   GRID RESPONSIVE
   ========================================================= */
@media (max-width: 1024px) {
    .grid-2,
    .grid-3,
    .grid-4 {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .grid-2,
    .grid-3,
    .grid-4 {
        grid-template-columns: 1fr;
    }
}

/* =========================================================
   FLEXBOX RESPONSIVE
   ========================================================= */
@media (max-width: 768px) {
    .flex-row-mobile {
        flex-direction: column;
    }
    
    .flex-wrap-mobile {
        flex-wrap: wrap;
    }
    
    .justify-center-mobile {
        justify-content: center;
    }
    
    .align-center-mobile {
        align-items: center;
    }
}

/* =========================================================
   TYPOGRAPHIE RESPONSIVE
   ========================================================= */
@media (max-width: 480px) {
    h1 { font-size: 1.5rem; line-height: 1.3; }
    h2 { font-size: 1.25rem; line-height: 1.3; }
    h3 { font-size: 1.1rem; line-height: 1.4; }
    h4 { font-size: 1rem; line-height: 1.4; }
    h5 { font-size: 0.95rem; line-height: 1.4; }
    h6 { font-size: 0.9rem; line-height: 1.4; }
    
    p, li {
        font-size: 0.9rem;
        line-height: 1.6;
    }
}

/* =========================================================
   SPACING RESPONSIVE
   ========================================================= */
@media (max-width: 768px) {
    .p-mobile-sm { padding: 8px !important; }
    .p-mobile-md { padding: 12px !important; }
    .p-mobile-lg { padding: 16px !important; }
    
    .m-mobile-sm { margin: 8px !important; }
    .m-mobile-md { margin: 12px !important; }
    .m-mobile-lg { margin: 16px !important; }
    
    .mb-mobile-0 { margin-bottom: 0 !important; }
    .mt-mobile-0 { margin-top: 0 !important; }
}

/* =========================================================
   UTILITAIRES RESPONSIVE
   ========================================================= */
@media (max-width: 768px) {
    .d-mobile-none { display: none !important; }
    .d-mobile-block { display: block !important; }
    .d-mobile-flex { display: flex !important; }
    .d-mobile-grid { display: grid !important; }
    
    .w-mobile-100 { width: 100% !important; }
    .w-mobile-auto { width: auto !important; }
    
    .text-mobile-center { text-align: center !important; }
    .text-mobile-left { text-align: left !important; }
    .text-mobile-right { text-align: right !important; }
    
    .flex-mobile-column { flex-direction: column !important; }
    .flex-mobile-row { flex-direction: row !important; }
    
    .gap-mobile-sm { gap: 8px !important; }
    .gap-mobile-md { gap: 12px !important; }
    .gap-mobile-lg { gap: 16px !important; }
}

/* =========================================================
   PERFORMANCE MOBILE
   ========================================================= */
@media (max-width: 768px) {
    * {
        -webkit-tap-highlight-color: rgba(0,0,0,0.1);
    }
    
    img {
        loading: lazy;
    }
    
    /* Réduire les animations sur mobile pour performance */
    .card,
    .btn {
        transition-duration: 0.2s;
    }
}

/* =========================================================
   ACCESSIBILITÉ MOBILE
   ========================================================= */
@media (max-width: 768px) {
    /* Focus visible sur mobile */
    button:focus,
    a:focus,
    input:focus,
    select:focus,
    textarea:focus {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
    }
    
    /* Améliorer la lisibilité */
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
}

/* =========================================================
   LANDSCAPE ORIENTATION
   ========================================================= */
@media (max-width: 1024px) and (orientation: landscape) {
    .sidebar {
        width: 240px;
    }
    
    .main-content {
        margin-left: 240px;
    }
    
    @media (max-width: 768px) {
        .sidebar {
            transform: translateX(-100%);
        }
        
        .main-content {
            margin-left: 0;
        }
    }
}

/* =========================================================
   HIGH DPI / RETINA DISPLAYS
   ========================================================= */
@media (-webkit-min-device-pixel-ratio: 2),
       (min-resolution: 192dpi) {
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
}

/* =========================================================
   REDUCED MOTION (Accessibilité)
   ========================================================= */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* =========================================================
   DARK MODE SUPPORT
   ========================================================= */
@media (prefers-color-scheme: dark) {
    /* Les thèmes personnalisables gèrent déjà le dark mode */
    /* Cette section peut être étendue si nécessaire */
}

/* =========================================================
   PRINT STYLES
   ========================================================= */
@media print {
    .sidebar,
    .top-header,
    .btn,
    .pagination,
    .mobile-menu-toggle,
    .sidebar-overlay {
        display: none !important;
    }
    
    .main-content {
        margin-left: 0 !important;
        padding: 0 !important;
        width: 100% !important;
    }
    
    .card,
    .card-hl {
        break-inside: avoid;
        page-break-inside: avoid;
        box-shadow: none;
        border: 1px solid #000;
    }
    
    .table-hl,
    .table {
        border-collapse: collapse;
    }
    
    .table-hl th,
    .table-hl td,
    .table th,
    .table td {
        border: 1px solid #000;
        padding: 8px;
    }
    
    a {
        text-decoration: underline;
    }
    
    a[href]:after {
        content: " (" attr(href) ")";
    }
}

