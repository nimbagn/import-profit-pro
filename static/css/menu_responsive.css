/* =========================================================
   MENU RESPONSIVE - OPTIMISATIONS COMPLÈTES
   Optimisations du menu sidebar pour tous les écrans
   ========================================================= */

/* =========================================================
   DESKTOP (> 1024px) - MENU COMPLET
   ========================================================= */
@media (min-width: 1025px) {
    .sidebar {
        width: 280px !important;
        transform: translateX(0) !important;
        position: fixed !important;
    }
    
    .sidebar-header {
        padding: var(--space-lg) !important;
    }
    
    .sidebar-header h4 {
        font-size: 1.25rem !important;
    }
    
    .menu-item,
    .menu-group-title {
        padding: var(--space-md) var(--space-lg) !important;
        font-size: 0.95rem !important;
    }
    
    .menu-subitem {
        padding: var(--space-sm) var(--space-lg) var(--space-sm) calc(var(--space-lg) + 20px + var(--space-sm)) !important;
        font-size: 0.9rem !important;
    }
    
    .menu-item i,
    .menu-subitem i {
        width: 20px !important;
        margin-right: var(--space-sm) !important;
    }
    
    .menu-toggle {
        display: none !important;
    }
    
    .mobile-menu-toggle {
        display: none !important;
    }
}

/* =========================================================
   TABLETTE PORTRAIT (769px - 1024px)
   ========================================================= */
@media (min-width: 769px) and (max-width: 1024px) {
    .sidebar {
        width: 240px !important;
        transform: translateX(0) !important;
        position: fixed !important;
    }
    
    .sidebar-header {
        padding: var(--space-md) var(--space-lg) !important;
    }
    
    .sidebar-header h4 {
        font-size: 1.1rem !important;
    }
    
    .menu-item,
    .menu-group-title {
        padding: 0.75rem 1rem !important;
        font-size: 0.9rem !important;
    }
    
    .menu-subitem {
        padding: 0.625rem 1rem 0.625rem 2.5rem !important;
        font-size: 0.85rem !important;
    }
    
    .menu-item i,
    .menu-subitem i {
        width: 18px !important;
        margin-right: var(--space-xs) !important;
        font-size: 0.9rem !important;
    }
    
    .menu-group-title {
        font-size: 0.8rem !important;
    }
    
    .menu-toggle {
        display: block !important;
    }
    
    .mobile-menu-toggle {
        display: block !important;
    }
}

/* =========================================================
   TABLETTE PAYSAGE (769px - 1024px)
   ========================================================= */
@media (min-width: 769px) and (max-width: 1024px) and (orientation: landscape) {
    .sidebar {
        width: 220px !important;
        transform: translateX(0) !important;
    }
    
    .sidebar-header {
        padding: var(--space-sm) var(--space-md) !important;
    }
    
    .sidebar-header h4 {
        font-size: 1rem !important;
    }
    
    .menu-item,
    .menu-group-title {
        padding: 0.625rem 0.875rem !important;
        font-size: 0.85rem !important;
    }
    
    .menu-subitem {
        padding: 0.5rem 0.875rem 0.5rem 2.25rem !important;
        font-size: 0.8rem !important;
    }
    
    .menu-item i,
    .menu-subitem i {
        width: 16px !important;
        margin-right: var(--space-xs) !important;
        font-size: 0.85rem !important;
    }
    
    .menu-group-title {
        font-size: 0.75rem !important;
    }
}

/* =========================================================
   MOBILE PORTRAIT (< 768px)
   ========================================================= */
@media (max-width: 768px) {
    .sidebar {
        width: 280px !important;
        transform: translateX(-100%) !important;
        transition: transform 0.3s ease-in-out !important;
        z-index: 2000 !important;
        position: fixed !important;
        box-shadow: 2px 0 20px rgba(0, 0, 0, 0.3) !important;
    }
    
    .sidebar.mobile-open {
        transform: translateX(0) !important;
    }
    
    .sidebar-header {
        padding: var(--space-md) var(--space-lg) !important;
        position: sticky !important;
        top: 0 !important;
        z-index: 10 !important;
        background: linear-gradient(180deg, var(--hl-blue) 0%, var(--hl-blue-dark) 100%) !important;
    }
    
    .sidebar-header h4 {
        font-size: 1.1rem !important;
    }
    
    .menu-item,
    .menu-group-title {
        padding: var(--space-md) var(--space-lg) !important;
        font-size: 0.95rem !important;
        min-height: 48px !important;
        display: flex !important;
        align-items: center !important;
    }
    
    .menu-subitem {
        padding: var(--space-sm) var(--space-lg) var(--space-sm) calc(var(--space-lg) + 20px + var(--space-sm)) !important;
        font-size: 0.9rem !important;
        min-height: 44px !important;
        display: flex !important;
        align-items: center !important;
    }
    
    .menu-item i,
    .menu-subitem i {
        width: 20px !important;
        margin-right: var(--space-sm) !important;
        font-size: 1rem !important;
    }
    
    .menu-group-title {
        font-size: 0.85rem !important;
        min-height: 48px !important;
    }
    
    .menu-toggle {
        display: block !important;
        position: absolute !important;
        right: var(--space-md) !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        color: var(--white) !important;
        font-size: 1.25rem !important;
        padding: 0.5rem !important;
        border-radius: 8px !important;
        background: rgba(255, 255, 255, 0.1) !important;
        border: none !important;
        cursor: pointer !important;
        transition: all 0.2s !important;
    }
    
    .menu-toggle:hover {
        background: rgba(255, 255, 255, 0.2) !important;
    }
    
    .mobile-menu-toggle {
        display: block !important;
        background: none !important;
        border: none !important;
        color: var(--color-primary) !important;
        font-size: 1.5rem !important;
        cursor: pointer !important;
        padding: 0.5rem !important;
        border-radius: 8px !important;
        transition: all 0.2s !important;
        min-width: 44px !important;
        min-height: 44px !important;
    }
    
    .mobile-menu-toggle:hover {
        background: var(--bg-tertiary) !important;
    }
    
    .sidebar-overlay {
        display: none !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: rgba(0, 0, 0, 0.5) !important;
        z-index: 1999 !important;
        backdrop-filter: blur(4px) !important;
        transition: opacity 0.3s ease !important;
    }
    
    .sidebar-overlay.active {
        display: block !important;
        opacity: 1 !important;
    }
}

/* =========================================================
   MOBILE PAYSAGE (< 768px landscape)
   ========================================================= */
@media (max-width: 768px) and (orientation: landscape) {
    .sidebar {
        width: 260px !important;
    }
    
    .sidebar-header {
        padding: var(--space-sm) var(--space-md) !important;
    }
    
    .sidebar-header h4 {
        font-size: 1rem !important;
    }
    
    .menu-item,
    .menu-group-title {
        padding: 0.75rem var(--space-md) !important;
        font-size: 0.9rem !important;
        min-height: 44px !important;
    }
    
    .menu-subitem {
        padding: 0.625rem var(--space-md) 0.625rem 2.25rem !important;
        font-size: 0.85rem !important;
        min-height: 40px !important;
    }
    
    .menu-item i,
    .menu-subitem i {
        width: 18px !important;
        font-size: 0.9rem !important;
    }
    
    .menu-group-title {
        font-size: 0.8rem !important;
    }
}

/* =========================================================
   PETIT MOBILE (< 480px)
   ========================================================= */
@media (max-width: 480px) {
    .sidebar {
        width: 100% !important;
        max-width: 320px !important;
    }
    
    .sidebar-header {
        padding: var(--space-sm) var(--space-md) !important;
    }
    
    .sidebar-header h4 {
        font-size: 1rem !important;
    }
    
    .menu-item,
    .menu-group-title {
        padding: var(--space-sm) var(--space-md) !important;
        font-size: 0.9rem !important;
        min-height: 44px !important;
    }
    
    .menu-subitem {
        padding: var(--space-xs) var(--space-md) var(--space-xs) 2rem !important;
        font-size: 0.85rem !important;
        min-height: 40px !important;
    }
    
    .menu-item i,
    .menu-subitem i {
        width: 18px !important;
        font-size: 0.9rem !important;
    }
    
    .menu-group-title {
        font-size: 0.8rem !important;
    }
}

/* =========================================================
   PETIT MOBILE PAYSAGE (< 480px landscape)
   ========================================================= */
@media (max-width: 480px) and (orientation: landscape) {
    .sidebar {
        width: 100% !important;
        max-width: 280px !important;
    }
    
    .sidebar-header {
        padding: 0.5rem var(--space-sm) !important;
    }
    
    .sidebar-header h4 {
        font-size: 0.95rem !important;
    }
    
    .menu-item,
    .menu-group-title {
        padding: 0.5rem var(--space-sm) !important;
        font-size: 0.85rem !important;
        min-height: 40px !important;
    }
    
    .menu-subitem {
        padding: 0.4rem var(--space-sm) 0.4rem 1.75rem !important;
        font-size: 0.8rem !important;
        min-height: 36px !important;
    }
    
    .menu-item i,
    .menu-subitem i {
        width: 16px !important;
        font-size: 0.85rem !important;
    }
    
    .menu-group-title {
        font-size: 0.75rem !important;
    }
}

/* =========================================================
   TOUCH TARGETS - ACCESSIBILITÉ
   ========================================================= */
@media (max-width: 1024px) {
    .menu-item,
    .menu-group-title,
    .menu-subitem {
        min-height: 44px !important;
        display: flex !important;
        align-items: center !important;
    }
    
    .menu-toggle,
    .mobile-menu-toggle {
        min-width: 44px !important;
        min-height: 44px !important;
    }
}

/* =========================================================
   SCROLLBAR OPTIMISÉE
   ========================================================= */
@media (max-width: 768px) {
    .sidebar::-webkit-scrollbar {
        width: 4px !important;
    }
    
    .sidebar::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3) !important;
    }
}

/* =========================================================
   ANIMATIONS MENU
   ========================================================= */
@media (max-width: 768px) {
    .sidebar {
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }
    
    .menu-group-content {
        transition: max-height 0.3s ease, opacity 0.3s ease !important;
    }
}

/* =========================================================
   FERMETURE AUTOMATIQUE SUR CLIC EXTERNE
   ========================================================= */
@media (max-width: 768px) {
    .sidebar-overlay.active {
        animation: fadeIn 0.3s ease !important;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* =========================================================
   MENU GROUP EXPANDED - RESPONSIVE
   ========================================================= */
@media (max-width: 768px) {
    .menu-group-content {
        max-height: 0 !important;
        overflow: hidden !important;
        transition: max-height 0.3s ease !important;
    }
    
    .menu-group-content.expanded {
        max-height: 1000px !important;
    }
}

/* =========================================================
   MENU ITEM ACTIVE - VISIBILITÉ
   ========================================================= */
@media (max-width: 768px) {
    .menu-item.active,
    .menu-subitem.active {
        background: rgba(255, 255, 255, 0.2) !important;
        border-left-width: 4px !important;
    }
}

